angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(t){var r=t.storageKey(),n=t.storage();n?n.get(r)?t.uses(n.get(r)):angular.isString(t.preferredLanguage())?t.uses(t.preferredLanguage()):n.set(r,t.uses()):angular.isString(t.preferredLanguage())&&t.uses(t.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(t){var r,n,e,a,o,s,i,u,l,c,f,g,h={},d=t,p=[],$=function(t,r){if(!t&&!r)return h;if(t&&!r){if(angular.isString(t))return h[t];angular.extend(h,v(t))}else angular.isObject(h[t])||(h[t]={}),angular.extend(h[t],v(r));return this},v=function(t,r,n,e){var a,o,s;for(a in r||(r=[]),n||(n={}),t)t.hasOwnProperty(a)&&(s=t[a],angular.isObject(s)?v(s,r.concat(a),n,a):(o=r.length?r.join(".")+"."+a:a,r.length&&a===e&&(keyWithShortPath=""+r.join("."),n[keyWithShortPath]="@:"+o),n[o]=s));return n};this.translations=$,this.addInterpolation=function(t){return p.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return u=t,this},this.preferredLanguage=function(t){return t?(r=t,this):r},this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(f=t,this):f},this.translationNotFoundIndicatorRight=function(t){return t?(g=t,this):g},this.fallbackLanguage=function(t){return t?(("string"==typeof t||angular.isArray(t))&&(n=t),this):n},this.uses=function(t){if(t){if(!h[t]&&!l)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return e=t,this}return e};var L=function(t){return t?void(d=t):s?s+d:d};this.storageKey=L,this.useUrlLoader=function(t){return this.useLoader("$translateUrlLoader",{url:t})},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,r){return l=t,c=r||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return o=t,this},this.storagePrefix=function(t){return t?(s=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return i=t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,s,d,v){var b,S=s.get(u||"$translateDefaultInterpolation"),y=!1,E={},I=function(t){if(!t)throw"No language key specified for loading.";var r=v.defer();return d.$broadcast("$translateLoadingStart"),y=!0,s.get(l)(angular.extend(c,{key:t})).then((function(n){d.$broadcast("$translateLoadingSuccess");var e={};angular.isArray(n)?angular.forEach(n,(function(t){angular.extend(e,t)})):angular.extend(e,n),y=!1,r.resolve({key:t,table:e}),d.$broadcast("$translateLoadingEnd")}),(function(t){d.$broadcast("$translateLoadingError"),r.reject(t),d.$broadcast("$translateLoadingEnd")})),r.promise};if(o&&(!(b=s.get(o)).get||!b.set))throw new Error("Couldn't use storage '"+o+"', missing get() or set() method!");p.length>0&&angular.forEach(p,(function(t){var n=s.get(t);n.setLocale(r||e),E[n.getInterpolationIdentifier()]=n}));var m=function(t,r,a){var o,u=e?h[e]:h,l=a?E[a]:S;if(u&&u.hasOwnProperty(t))return angular.isString(u[t])&&"@:"===u[t].substr(0,2)?m(u[t].substr(2),r,a):l.interpolate(u[t],r);if(i&&!y&&s.get(i)(t,e),e&&n&&function(t){if(t&&n){if(angular.isArray(n)){for(var r=n.length,a=0;r>a;a++)if(e===h[n[a]])return!1;return!0}return t!==n}return!1}(e)){"string"==typeof n?(o=[]).push(n):o=n;for(var c=o.length,d=0;c>d;d++)if(e!==h[o[d]]){var p,$=h[o[d]][t];if($)return l.setLocale(o[d]),p=l.interpolate($,r),l.setLocale(e),p}}return f&&(t=[f,t].join(" ")),g&&(t=[t,g].join(" ")),t};if(m.preferredLanguage=function(){return r},m.fallbackLanguage=function(){return n},m.proposedLanguage=function(){return a},m.storage=function(){return b},m.uses=function(t){function r(t){e=t,d.$broadcast("$translateChangeSuccess"),o&&b.set(m.storageKey(),e),S.setLocale(e),angular.forEach(E,(function(t,r){E[r].setLocale(e)})),n.resolve(t),d.$broadcast("$translateChangeEnd")}if(!t)return e;var n=v.defer();return d.$broadcast("$translateChangeStart"),!h[t]&&l?(a=t,I(t).then((function(t){a=void 0,$(t.key,t.table),r(t.key)}),(function(t){a=void 0,d.$broadcast("$translateChangeError"),n.reject(t),d.$broadcast("$translateChangeEnd")}))):r(t),n.promise},m.storageKey=function(){return L()},m.refresh=function(t){function r(){o.resolve(),d.$broadcast("$translateRefreshEnd")}function a(){o.reject(),d.$broadcast("$translateRefreshEnd")}if(!l)throw new Error("Couldn't refresh translation table, no loader registered!");var o=v.defer();if(t)if(h.hasOwnProperty(t)){d.$broadcast("$translateRefreshStart");var s=I(t);t===e?s.then((function(n){h[t]=n.table,m.uses(e),r()}),(function(){d.$broadcast("$translateChangeError"),a()})):s.then((function(n){h[t]=n.table,r()}),a)}else o.reject();else{d.$broadcast("$translateRefreshStart");var i=[];if(n)if("string"==typeof n)i.push(I(n));else for(var u=n.length,c=0;u>c;c++)i.push(I(n[c]));e&&i.push(I(e)),i.length>0?v.all(i).then((function(t){for(var n in h)h.hasOwnProperty(n)&&delete h[n];for(var a=0,o=t.length;o>a;a++)$(t[a].key,t[a].table);e&&m.uses(e),r()}),(function(t){t===e&&d.$broadcast("$translateChangeError"),a()})):r()}return o.promise},l&&(angular.equals(h,{})&&m.uses(m.uses()),n))if("string"!=typeof n||h[n])for(var k=n.length,w=0;k>w;w++)h[n[w]]||I(n[w]);else I(n);return m}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(t){var r={};return r.setLocale=function(t){t},r.getInterpolationIdentifier=function(){return"default"},r.interpolate=function(r,n){return t(r)(n)},r}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$filter","$interpolate","$parse",function(t,r,n){var e=t("translate");return{restrict:"AE",scope:!0,link:function(t,a,o){o.translateInterpolation&&(t.interpolation=o.translateInterpolation),o.$observe("translate",(function(n){t.translationId=angular.equals(n,"")||void 0===n?r(a.text().replace(/^\s+|\s+$/g,""))(t.$parent):n})),o.$observe("translateValues",(function(r){r&&t.$parent.$watch((function(){t.interpolateParams=n(r)(t.$parent)}))})),t.$on("$translateChangeSuccess",(function(){a.html(e(t.translationId,t.interpolateParams,t.interpolation))})),t.$watch("[translationId, interpolateParams]",(function(){t.translationId&&a.html(e(t.translationId,t.interpolateParams,t.interpolation))}),!0)}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(t,r){return function(n,e,a){return angular.isObject(e)||(e=t(e)()),r(n,e,a)}}]);